{% extends "MesClicsAdminBundle::layout.html.twig" %}

{% block deskHeadNavRails %}
    <a href="{{ path('mesclics_admin_home') }}" class="desk-head-nav_rails--item">Console d'administration</a>
    >
    <a href="{{ path('mesclics_admin_edition') }}" class="desk-head-nav_rails--item {% if subSection is not defined %}[ oocss-active-link ]{% endif %}">Edition</a>
    {% if subSection is defined %}
    >
    <a href="{{ path('mesclics_admin_' ~ subSection) }}" class="desk-head-nav_rails--item {% if postSection is not defined and collectionSection is not defined %}[ oocss-active-link ]{% endif %}">
        {% if subSection is same as ('posts') %}Publications{% endif %}
        {% if subSection is same as ('collections') %}Collections{% endif %}
    </a>
    {% endif %}
    {% if postSection is defined %}
    >
    <a href="" class="desk-head-nav_rails--item [ oocss-active-link ]">
        {% if postSection is same as ('new') %}<a href="" class="desk-head-nav_rails--item [ oocss-active-link ]">Ajouter une publication</a>
        <!-- TODO: Ajouter le lien ligne 19 -->
        {% elseif postSection is same as ('edit') and currentPost is defined %}<a href="" class="desk-head-nav_rails--item [ oocss-active-link ]">{{ currentPost.title }}</a>
        {% elseif postSection is same as ('edit') %}<a href="" class="desk-head-nav_rails--item [ oocss-active-link ]">Modifier une publication</a>
        {% endif %}
    </a>
    {% endif %}
{% endblock deskHeadNavRails %}

{% block deskMain %} 
    {# on inclue le template de la vue edition correspondant à la subSection #}
    {% if subSection is defined and subSection is same as ('collections') %}
        <section>
            {% if collectionSection is defined %}
                {% include "MesClicsPostBundle:Admin:collection-" ~ collectionSection ~ ".html.twig" %}
            {% else %}
                {% include "MesClicsPostBundle:Admin:collections.html.twig" %}
            {% endif %}
        </section>
        
    {% else %}
        {% if postSection is defined %}
            {% include "MesClicsPostBundle:Admin:post-" ~ postSection ~ ".html.twig" %}
        {% else %}
            {% include "MesClicsPostBundle:Widgets:posts-list.html.twig" %}
        {% endif %}
    {% endif %}
{% endblock deskMain%}

{% block deskLateral%}
    <section id="edition-nav" class="oocss-full-container-width">
        {% include "MesClicsPostBundle:Admin:edition-nav.html.twig" %}
    </section>

    {# si un post est chargé on insère le template du post-preview #}
    {% if post_preview is defined %}
        {% include "MesClicsPostBundle:Admin:post-preview.html.twig" %}
    {% else %}
        {% if newPostForm is defined and subSection != 'publication-new' %}
            <section class="card" id="new-post">
                {% include "MesClicsPostBundle:Admin:post-new.html.twig" %}
            </section>
        {% endif %}
    {% endif %}
{% endblock deskLateral %}
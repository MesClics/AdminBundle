{"version":3,"sources":["findAncestor.js","loader.js","messageSentClassAdder.js","slideshow.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"compiled.js","sourcesContent":["// Find the closest ancestor of el with class cls\r\n\r\nfunction findAncestor(el, cls) {\r\n    while ((el = el.parentElement) && !el.classList.contains(cls));\r\n    return el;\r\n}","var loader = document.querySelector(\".loader\");\r\nvar animationOn = false;\r\n\r\n// //on vérifie s'il y a un form nouveau message\r\n// var newMsg = document.querySelector(\".message-form__d__new\");\r\n\r\n// //on ajoute un eventlistener sur l'animation\r\n// newMsg.addEventListener('animationstart', function(e){\r\n//     animationOn = true;\r\n// });\r\n\r\n// newMsg.addEventListener('animationend', function(e){\r\n//     animationOn = false;\r\n//     loaderClassAdder();\r\n// })\r\n\r\nfunction loaderClassAdd() {\r\n    loader.classList.add(\"loader-active\");    \r\n}\r\n\r\nfunction loaderClassRemove(){\r\n    loader.addEventListener('animationiteration', function(e){\r\n        e.target.classList.remove(\"loader-active\");\r\n    });\r\n\r\n    loader.addEventListener('webkitAnimationIteration', function (e) {\r\n        e.target.classList.remove(\"loader-active\");\r\n    });\r\n\r\n    loader.addEventListener('MSAnimationIteration', function (e) {\r\n        e.target.classList.remove(\"loader-active\");\r\n    });\r\n    \r\n    \r\n    // loader.classList.remove(\"loader-active\");\r\n}\r\n\r\nwindow.addEventListener('beforeunload', function(e){\r\n\r\n    if(animationOn){\r\n        return;\r\n    }\r\n\r\n    //check if popup is active\r\n    var popup = document.querySelector('.popup');\r\n    if(popup && !popup.classList.contains('closed')){\r\n        popup.classList.add('closed');\r\n    }\r\n    loaderClassAdd();\r\n});\r\n\r\nwindow.addEventListener('load', function (e) {\r\n    if(loader.classList.contains(\"loader-active\")){\r\n        loaderClassRemove();\r\n    }\r\n});\r\n","var form = document.querySelector('.message-form__d__new');\r\nvar hasBeenAnimated = false;\r\n\r\nfunction messageAddClass(e){\r\n    e.target.classList.add('message-form__d__new__s__sent');\r\n    hasBeenAnimated = true;\r\n}\r\n\r\nif(form && !hasBeenAnimated){\r\n    form.addEventListener('submit', function (e) {\r\n            messageAddClass(e);\r\n    });\r\n};","var slideshows = document.querySelectorAll(\".oocss-slideshow\");\r\n\r\nfor (let i = 0; i < slideshows.length; i++) {\r\n    //variables\r\n    let slideshow = slideshows[i];\r\n    let steps = slideshow.querySelectorAll(\".oocss-slideshow--step\");\r\n    let slideshowContent = slideshow.querySelector(\".oocss-slideshow--content\");\r\n    let slider = slideshow.querySelector(\".oocss-slideshow--slider\");\r\n    let cursors = slider.querySelector(\".oocss-slideshow--cursors\");\r\n    let prevBtn = slideshow.querySelector(\".oocss-slideshow--prev\");\r\n    let nextBtn = slideshow.querySelector(\".oocss-slideshow--next\");\r\n\r\n    //functions\r\n    function handleFocus(step) {\r\n        step.setAttribute(\"tabindex\", null);\r\n        let childrenElts = step.getElementsByTagName(\"input\", \"textarea\", \"button\", \"select\");\r\n        if (childrenElts.length > 0) {\r\n            for (let i = 0; i < childrenElts.length; i++) {\r\n                childElt = childrenElts[i];\r\n                childElt.addEventListener(\"keydown\", function (e) {\r\n                    if (e.shiftKey && e.keyCode == 9) {\r\n                        if (i == 0) {\r\n                            //check if prevBtn display is not none\r\n                            if (prevBtn.style.display !== \"none\") {\r\n                                e.preventDefault();\r\n                                clickOnPrevBtn();\r\n                            }\r\n                        }\r\n                    } else if (e.keyCode == 9 || e.keyCode == 13) {\r\n                        if (i === childrenElts.length - 1) {\r\n                            if (nextBtn.style.display !== \"none\") {\r\n                                e.preventDefault();\r\n                                clickOnNextBtn();\r\n                            }\r\n                        } else if (i == 0) {\r\n                            e.preventDefault();\r\n                            //get next input and select\r\n                            childrenElts[i + 1].select();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    function clickOnCursor(step) {\r\n        let stepOrder = step.getAttribute(\"data-step-order\");\r\n        slideTo(stepOrder);\r\n    }\r\n\r\n    function getHTMLOrder(step) {\r\n        let steps = slideshow.querySelectorAll(\".oocss-slideshow--step\");\r\n        for (i = 0; i < steps.length; i++) {\r\n            if (steps[i] == step) {\r\n                return i;\r\n            }\r\n        }\r\n    }\r\n\r\n    function slideTo(stepNb) {\r\n        let step = slideshowContent.querySelector(\"[data-step-order='\" + stepNb + \"']\");\r\n        if (!step) {\r\n            console.log(\"pas de data-step-order\");\r\n            step = steps[stepNb - 1];\r\n        }\r\n        let stepHTMLOrder = getHTMLOrder(step);\r\n        let translateX = \"calc(-1 * \" + window.getComputedStyle(slideshowContent).width + \" * \" + (stepHTMLOrder) + \")\";\r\n        slideshowContent.style.transform = \"translateX(\" + translateX + \")\";\r\n        slideshow.setAttribute(\"data-active-step\", stepNb);\r\n\r\n        //hide prevBtn or Next Btn if first or last step\r\n        if (stepNb == 1) {\r\n            prevBtn.style.display = \"none\";\r\n        } else {\r\n            prevBtn.style.display = \"block\";\r\n        }\r\n        if (stepNb == steps.length) {\r\n            nextBtn.style.display = \"none\";\r\n        } else {\r\n            nextBtn.style.display = \"block\";\r\n        }\r\n\r\n        //add active class to active cursor item\r\n        let cursorItems = cursors.querySelectorAll(\".oocss-slideshow--cursor\");\r\n        for (let n = 1; n <= cursorItems.length; n++) {\r\n            if (n == stepNb) {\r\n                cursorItems[n - 1].classList.add(\"active\");\r\n            } else {\r\n                cursorItems[n - 1].classList.remove(\"active\");\r\n            }\r\n        };\r\n\r\n        //focus on first element;\r\n        //let step = slideshow.querySelector(\"[data-step-order='\" + stepNb + \"']\");\r\n        let stepFirstFocusableChild = step.getElementsByTagName(\"input\", \"textarea\", \"button\", \"select\")[0];\r\n\r\n        if (stepFirstFocusableChild) {\r\n            stepFirstFocusableChild.select();\r\n        }\r\n    }\r\n\r\n    function clickOnPrevBtn() {\r\n        let activeStep = slideshow.getAttribute(\"data-active-step\");\r\n        activeStep--;\r\n        slideTo(activeStep);\r\n    }\r\n\r\n    function clickOnNextBtn() {\r\n        let activeStep = slideshow.getAttribute(\"data-active-step\");\r\n        activeStep++;\r\n        slideTo(activeStep);\r\n    }\r\n\r\n    function rewindSlideshow() {\r\n        slideTo(1);\r\n    }\r\n\r\n    function autoplaySlideshow() {\r\n        let speed = null;\r\n        if (slideshow.getAttribute(\"autoplay\") && slideshow.getAttribute(\"autoplay\") == \"true\") {\r\n            speed = parseInt(slideshow.getAttribute(\"data-slideshow-speed\"));\r\n            //set a default speed value in ms\r\n            if (!speed) {\r\n                speed = 5000;\r\n            }\r\n        };\r\n        if (speed) {\r\n            setInterval(function () {\r\n                autoSlide();\r\n            }, speed);\r\n        }\r\n    }\r\n\r\n    function autoSlide() {\r\n        let steps = slideshow.querySelectorAll(\".oocss-slideshow--step\");\r\n        let currentActiveStep = slideshow.getAttribute(\"data-active-step\");\r\n        let nextStep = (parseInt(currentActiveStep) + 1);\r\n\r\n        if (nextStep <= steps.length) {\r\n            slideTo(nextStep);\r\n        } else {\r\n            rewindSlideshow();\r\n        }\r\n    }\r\n\r\n    //on page load check for slider && rewind slideshow\r\n    window.addEventListener(\"load\", function (e) {\r\n        //Create prev btn, next btn and cursor divs if not present\r\n        if (prevBtn == null) {\r\n            let prevBtn = document.createElement(\"button\");\r\n            prevBtn.classList.add(\"oocss-slideshow--prev\");\r\n            prevBtn.textContent = \"←\";\r\n            slider.append(prevBtn);\r\n        }\r\n        if (cursors == null) {\r\n            let cursors = document.createElement(\"div\");\r\n            cursors.classList.add(\"oocss-slideshow--cursors\");\r\n            slider.append(cursors);\r\n        }\r\n        if (nextBtn == null) {\r\n            let nextBtn = document.createElement(\"button\");\r\n            nextBtn.classList.add(\"oocss-slideshow--next\");\r\n            nextBtn.textContent = \"→\";\r\n            slider.append(nextBtn);\r\n        }\r\n\r\n        prevBtn = slideshow.querySelector(\".oocss-slideshow--prev\");\r\n        cursors = slideshow.querySelector(\".oocss-slideshow--cursors\");\r\n        nextBtn = slideshow.querySelector(\".oocss-slideshow--next\");\r\n\r\n        //add listener on prev and next btns\r\n        prevBtn.addEventListener(\"click\", function (e) {\r\n            clickOnPrevBtn();\r\n        });\r\n        nextBtn.addEventListener(\"click\", function (e) {\r\n            clickOnNextBtn();\r\n        });\r\n\r\n\r\n        //set the grid-template-columns of the slideshow-content block based on the steps number  \r\n        slideshowContent.style.gridTemplateColumns = \"repeat(\" + steps.length + \", 100%)\";\r\n\r\n        for (let n = 0; n < steps.length; n++) {\r\n            let step = steps[n];\r\n            //set the slideshow--slider based on the number of steps\r\n            let cursor = document.createElement(\"button\");\r\n            cursor.classList.add(\"oocss-slideshow--cursor\");\r\n            cursor.setAttribute(\"data-step-order\", (n + 1));\r\n\r\n\r\n            //add listeners on button click\r\n            cursor.addEventListener(\"click\", function (e) {\r\n                clickOnCursor(e.target);\r\n            });\r\n            cursors.append(cursor);\r\n            //handle Focus on each step child element\r\n            handleFocus(step);\r\n        }\r\n\r\n        rewindSlideshow();\r\n        autoplaySlideshow();\r\n    });\r\n\r\n\r\n}"]}